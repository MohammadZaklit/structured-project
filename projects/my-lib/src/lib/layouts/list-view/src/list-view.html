<div class="container-fluid">
  @if (config()?.pageTitle) {
    <div class="grid mb-4">
      <div class="col">
        <h2 class="mb-0">{{ config()?.pageTitle }}</h2>
      </div>
    </div>
  }

  <p-toolbar class="mb-6">
    <ng-template #start>
      <div class="flex gap-2">
        @if (config()?.showAddButton) {
          <p-button
            label="New"
            icon="pi pi-plus"
            severity="secondary"
            class="mr-2"
            (onClick)="addBtnClick.emit()"
          />
        }

        <p-button
          severity="secondary"
          label="Delete"
          icon="pi pi-trash"
          outlined
          (onClick)="bulkDelete()"
        />

        <p-button
          icon="pi pi-sliders-h"
          label="Advanced Search"
          (onClick)="onAdvancedSearch.emit()"
          styleClass="p-button-outlined"
        ></p-button>
      </div>
    </ng-template>

    <ng-template #end>
      <div class="flex gap-2">
        @for (button of config()?.dynamicHeaderButtons; track button.label) {
          <p-button
            [label]="button.label"
            [icon]="'pi pi-plus'"
            (onClick)="button.onclick()"
            [styleClass]="button.styleClass"
            [pTooltip]="button.tooltip"
            tooltipPosition="bottom"
            [disabled]="button.disabled && button.disabled()"
            [style]="button.visible && !button.visible() ? { display: 'none' } : {}"
          ></p-button>
        }
        @if (config()?.exportToExcel) {
          <p-button
            label="Export"
            icon="pi pi-upload"
            severity="secondary"
            (onClick)="exportExcel()"
          />
        }
      </div>
    </ng-template>
  </p-toolbar>

  <nz-table-grid
    [config]="tableConfig"
    (onEdit)="editRowCallback($event)"
    (onView)="viewRowCallback($event)"
    (onDelete)="deleteRowCallback($event)"
    (onRowReorder)="reorderRowCallback($event)"
    (onColumnSort)="sortcolumnRowCallback($event)"
  ></nz-table-grid>
</div>

<nz-confirm-popup [config]="DeleteConfirmPopupConfig"></nz-confirm-popup>
